# entity:flying_cow/summon
# called by: <dev>

$summon cow ~ ~ ~ {$(nbt),CustomName:'{"text":"Flying Cow"}',DeathLootTable:"magical_addons:entities/flying_cow",Health:16.0,attributes:[{id:max_health,base:16.0}],active_effects:[{id:"invisibility",amplifier:-1,duration:-1,show_particles:0b}],Tags:["maddons.flying_cow","maddons.vehicle"],Passengers:[{id:"item_display",teleport_duration:3,shadow_strength:1.5,shadow_radius:0.75,item:{id:"potion",components:{item_model:"magical_addons:entity/flying_cow",custom_model_data:{strings:["body_idle_normal"]},"minecraft:potion_contents":{custom_color:0}}},view_range:300f,Tags:["maddons.entity","maddons.flying_cow","maddons.body","maddons.rotatable","maddons.part"]},{id:"item_display",item:{id:"potion",components:{item_model:"magical_addons:entity/flying_cow",custom_model_data:{strings:["head_idle_normal"]},potion_contents:{custom_color:0}}},view_range:300f,teleport_duration:3,Tags:["maddons.flying_cow","maddons.head","maddons.part"]},{id:"item_display",item:{id:"potion",components:{item_model:"magical_addons:entity/wings",custom_model_data:{strings:["retracted_normal"]},potion_contents:{custom_color:0}}},view_range:300f,teleport_duration:3,Tags:["maddons.flying_cow","maddons.wings","maddons.rotatable","maddons.part","maddons.retracted"]}]}
execute as @n[type=cow,tag=maddons.vehicle,tag=maddons.flying_cow] on passengers run data merge entity @s[tag=maddons.part] {transformation:{left_rotation:[0f,1f,0f,0f],translation:[0f,-0.88f,0f]}}
execute as @n[type=cow,tag=maddons.vehicle,tag=maddons.flying_cow] on passengers as @s[tag=maddons.entity] run function magical_addons:dev/register_entity {id:"flying_cow",cmd:"function magical_addons:entity/flying_cow/loop"}