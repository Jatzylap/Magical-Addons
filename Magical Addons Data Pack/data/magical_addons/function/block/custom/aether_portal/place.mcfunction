# block:custom/aether_portal/place
# called by: block:custom/aether_portal/scan

## Sound
playsound block.wood.place block @a ~ ~ ~ 1 .8

## Block
execute store result score @s maddons.rotation run data get entity @s Rotation[0] 10

## Part: foot
execute if score @s maddons.rotation matches 450..1349 if block ~-1 ~ ~ #magical_addons:non_collidable run summon item_display ~ ~ ~ {item:{id:"spawner",components:{"minecraft:item_model":"air","minecraft:custom_data":{magical_addons:{id:"aether_portal",face:"west",part:"foot",cmd:"execute unless block ~ ~ ~ white_bed[facing=west,part=foot] run function magical_addons:block/custom/aether_portal/break"}}}},Tags:[maddons.block,maddons.aether_portal,maddons.invul,maddons.block.face_west,maddons.block.part_foot]}
execute if score @s maddons.rotation matches 1350..1800 if block ~ ~ ~-1 #magical_addons:non_collidable run summon item_display ~ ~ ~ {item:{id:"spawner",components:{"minecraft:item_model":"air","minecraft:custom_data":{magical_addons:{id:"aether_portal",face:"north",part:"foot",cmd:"execute unless block ~ ~ ~ white_bed[facing=north,part=foot] run function magical_addons:block/custom/aether_portal/break"}}}},Tags:[maddons.block,maddons.aether_portal,maddons.invul,maddons.block.face_north,maddons.block.part_foot]}
execute if score @s maddons.rotation matches -1799..-1351 if block ~ ~ ~-1 #magical_addons:non_collidable run summon item_display ~ ~ ~ {item:{id:"spawner",components:{"minecraft:item_model":"air","minecraft:custom_data":{magical_addons:{id:"aether_portal",face:"north",part:"foot",cmd:"execute unless block ~ ~ ~ white_bed[facing=north,part=foot] run function magical_addons:block/custom/aether_portal/break"}}}},Tags:[maddons.block,maddons.aether_portal,maddons.invul,maddons.block.face_north,maddons.block.part_foot]}
execute if score @s maddons.rotation matches -1350..-450 if block ~1 ~ ~ #magical_addons:non_collidable run summon item_display ~ ~ ~ {item:{id:"spawner",components:{"minecraft:item_model":"air","minecraft:custom_data":{magical_addons:{id:"aether_portal",face:"east",part:"foot",cmd:"execute unless block ~ ~ ~ white_bed[facing=east,part=foot] run function magical_addons:block/custom/aether_portal/break"}}}},Tags:[maddons.block,maddons.aether_portal,maddons.invul,maddons.block.face_east,maddons.block.part_foot]}
execute if score @s maddons.rotation matches -449..449 if block ~ ~ ~1 #magical_addons:non_collidable run summon item_display ~ ~ ~ {item:{id:"spawner",components:{"minecraft:item_model":"air","minecraft:custom_data":{magical_addons:{id:"aether_portal",face:"south",part:"foot",cmd:"execute unless block ~ ~ ~ white_bed[facing=south,part=foot] run function magical_addons:block/custom/aether_portal/break"}}}},Tags:[maddons.block,maddons.aether_portal,maddons.invul,maddons.block.face_south,maddons.block.part_foot]}
execute if score @s maddons.rotation matches 450..1349 if block ~-1 ~ ~ #magical_addons:non_collidable run setblock ~ ~ ~ white_bed[facing=west,part=foot]{components:{tooltip_display:{hidden_components:["minecraft:block_entity_data"]},item_name:{"translate":"item.magical_addons.aether_portal"},rarity:"uncommon",item_model:"magical_addons:aether_portal",custom_data:{magical_addons:{generated:true,id:"aether_portal"}}}}
execute if score @s maddons.rotation matches 1350..1800 if block ~ ~ ~-1 #magical_addons:non_collidable run setblock ~ ~ ~ white_bed[facing=north,part=foot]{components:{tooltip_display:{hidden_components:["minecraft:block_entity_data"]},item_name:{"translate":"item.magical_addons.aether_portal"},rarity:"uncommon",item_model:"magical_addons:aether_portal",custom_data:{magical_addons:{generated:true,id:"aether_portal"}}}}
execute if score @s maddons.rotation matches -1799..-1351 if block ~ ~ ~-1 #magical_addons:non_collidable run setblock ~ ~ ~ white_bed[facing=north,part=foot]{components:{tooltip_display:{hidden_components:["minecraft:block_entity_data"]},item_name:{"translate":"item.magical_addons.aether_portal"},rarity:"uncommon",item_model:"magical_addons:aether_portal",custom_data:{magical_addons:{generated:true,id:"aether_portal"}}}}
execute if score @s maddons.rotation matches -1350..-450 if block ~1 ~ ~ #magical_addons:non_collidable run setblock ~ ~ ~ white_bed[facing=east,part=foot]{components:{tooltip_display:{hidden_components:["minecraft:block_entity_data"]},item_name:{"translate":"item.magical_addons.aether_portal"},rarity:"uncommon",item_model:"magical_addons:aether_portal",custom_data:{magical_addons:{generated:true,id:"aether_portal"}}}}
execute if score @s maddons.rotation matches -449..449 if block ~ ~ ~1 #magical_addons:non_collidable run setblock ~ ~ ~ white_bed[facing=south,part=foot]{components:{tooltip_display:{hidden_components:["minecraft:block_entity_data"]},item_name:{"translate":"item.magical_addons.aether_portal"},rarity:"uncommon",item_model:"magical_addons:aether_portal",custom_data:{magical_addons:{generated:true,id:"aether_portal"}}}}

## Part: head
execute if score @s maddons.rotation matches 450..1349 positioned ~-1 ~ ~ if block ~ ~ ~ #magical_addons:non_collidable summon item_display run data merge entity @s {transformation:{translation:[0.0,0.005,0.0],scale:[1.01,1.01,1.01]},Rotation:[-90f,0f],item:{id:"spawner",components:{"minecraft:item_model":"magical_addons:aether_portal","minecraft:custom_data":{magical_addons:{id:"aether_portal",face:"west",part:"head",cmd:"execute unless block ~ ~ ~ white_bed[facing=west,part=head] run function magical_addons:block/custom/aether_portal/break"}}}},view_range:64,Tags:[maddons.block,maddons.aether_portal,maddons.invul,maddons.block.face_west,maddons.block.part_head]}
execute if score @s maddons.rotation matches 1350..1800 positioned ~ ~ ~-1 if block ~ ~ ~ #magical_addons:non_collidable summon item_display run data merge entity @s {transformation:{translation:[0.0,0.005,0.0],scale:[1.01,1.01,1.01]},Rotation:[0f,0f],item:{id:"spawner",components:{"minecraft:item_model":"magical_addons:aether_portal","minecraft:custom_data":{magical_addons:{id:"aether_portal",face:"north",part:"head",cmd:"execute unless block ~ ~ ~ white_bed[facing=north,part=head] run function magical_addons:block/custom/aether_portal/break"}}}},view_range:64,Tags:[maddons.block,maddons.aether_portal,maddons.invul,maddons.block.face_north,maddons.block.part_head]}
execute if score @s maddons.rotation matches -1799..-1351 positioned ~ ~ ~-1 if block ~ ~ ~ #magical_addons:non_collidable summon item_display run data merge entity @s {transformation:{translation:[0.0,0.005,0.0],scale:[1.01,1.01,1.01]},Rotation:[0f,0f],item:{id:"spawner",components:{"minecraft:item_model":"magical_addons:aether_portal","minecraft:custom_data":{magical_addons:{id:"aether_portal",face:"north",part:"head",cmd:"execute unless block ~ ~ ~ white_bed[facing=north,part=head] run function magical_addons:block/custom/aether_portal/break"}}}},view_range:64,Tags:[maddons.block,maddons.aether_portal,maddons.invul,maddons.block.face_north,maddons.block.part_head]}
execute if score @s maddons.rotation matches -1350..-450 positioned ~1 ~ ~ if block ~ ~ ~ #magical_addons:non_collidable summon item_display run data merge entity @s {transformation:{translation:[0.0,0.005,0.0],scale:[1.01,1.01,1.01]},Rotation:[90f,0f],item:{id:"spawner",components:{"minecraft:item_model":"magical_addons:aether_portal","minecraft:custom_data":{magical_addons:{id:"aether_portal",face:"east",part:"head",cmd:"execute unless block ~ ~ ~ white_bed[facing=east,part=head] run function magical_addons:block/custom/aether_portal/break"}}}},view_range:64,Tags:[maddons.block,maddons.aether_portal,maddons.invul,maddons.block.face_east,maddons.block.part_head]}
execute if score @s maddons.rotation matches -449..449 positioned ~ ~ ~1 if block ~ ~ ~ #magical_addons:non_collidable summon item_display run data merge entity @s {transformation:{translation:[0.0,0.005,0.0],scale:[1.01,1.01,1.01]},Rotation:[180f,0f],item:{id:"spawner",components:{"minecraft:item_model":"magical_addons:aether_portal","minecraft:custom_data":{magical_addons:{id:"aether_portal",face:"south",part:"head",cmd:"execute unless block ~ ~ ~ white_bed[facing=south,part=head] run function magical_addons:block/custom/aether_portal/break"}}}},view_range:64,Tags:[maddons.block,maddons.aether_portal,maddons.invul,maddons.block.face_south,maddons.block.part_head]}
execute if score @s maddons.rotation matches 450..1349 positioned ~-1 ~ ~ if block ~ ~ ~ #magical_addons:non_collidable run setblock ~ ~ ~ white_bed[facing=west,part=head]{components:{tooltip_display:{hidden_components:["minecraft:block_entity_data"]},item_name:{"translate":"item.magical_addons.aether_portal"},rarity:"uncommon",item_model:"magical_addons:aether_portal",custom_data:{magical_addons:{generated:true,id:"aether_portal"}}}}
execute if score @s maddons.rotation matches 1350..1800 positioned ~ ~ ~-1 if block ~ ~ ~ #magical_addons:non_collidable run setblock ~ ~ ~ white_bed[facing=north,part=head]{components:{tooltip_display:{hidden_components:["minecraft:block_entity_data"]},item_name:{"translate":"item.magical_addons.aether_portal"},rarity:"uncommon",item_model:"magical_addons:aether_portal",custom_data:{magical_addons:{generated:true,id:"aether_portal"}}}}
execute if score @s maddons.rotation matches -1799..-1351 positioned ~ ~ ~-1 if block ~ ~ ~ #magical_addons:non_collidable run setblock ~ ~ ~ white_bed[facing=north,part=head]{components:{tooltip_display:{hidden_components:["minecraft:block_entity_data"]},item_name:{"translate":"item.magical_addons.aether_portal"},rarity:"uncommon",item_model:"magical_addons:aether_portal",custom_data:{magical_addons:{generated:true,id:"aether_portal"}}}}
execute if score @s maddons.rotation matches -1350..-450 positioned ~1 ~ ~ if block ~ ~ ~ #magical_addons:non_collidable run setblock ~ ~ ~ white_bed[facing=east,part=head]{components:{tooltip_display:{hidden_components:["minecraft:block_entity_data"]},item_name:{"translate":"item.magical_addons.aether_portal"},rarity:"uncommon",item_model:"magical_addons:aether_portal",custom_data:{magical_addons:{generated:true,id:"aether_portal"}}}}
execute if score @s maddons.rotation matches -449..449 positioned ~ ~ ~1 if block ~ ~ ~ #magical_addons:non_collidable run setblock ~ ~ ~ white_bed[facing=south,part=head]{components:{tooltip_display:{hidden_components:["minecraft:block_entity_data"]},item_name:{"translate":"item.magical_addons.aether_portal"},rarity:"uncommon",item_model:"magical_addons:aether_portal",custom_data:{magical_addons:{generated:true,id:"aether_portal"}}}}

## Debug
execute if block ~ ~ ~ spawner{components:{"minecraft:custom_data":{magical_addons:{id:"aether_portal"}}}} if entity @s[gamemode=!creative] run loot spawn ~ ~ ~ loot magical_addons:aether_portal
execute if block ~ ~ ~ spawner{components:{"minecraft:custom_data":{magical_addons:{id:"aether_portal"}}}} run return run setblock ~ ~ ~ air

## Light
execute if block ~ ~ ~ white_bed[facing=north] run fill ~-1 ~ ~-2 ~1 ~1 ~1 light[level=15] keep
execute if block ~ ~ ~ white_bed[facing=south] run fill ~-1 ~ ~-1 ~1 ~1 ~2 light[level=15] keep
execute if block ~ ~ ~ white_bed[facing=west] run fill ~-2 ~ ~-1 ~1 ~1 ~1 light[level=15] keep
execute if block ~ ~ ~ white_bed[facing=east] run fill ~-1 ~ ~-1 ~2 ~1 ~1 light[level=15] keep