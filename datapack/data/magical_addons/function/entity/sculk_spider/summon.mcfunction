# entity:sculk_spider/summon
# called by: entity:sculk_spider/spawn

## Errors
execute store result score #maddons.shared.difficulty maddons.temp run difficulty
execute if score #maddons.shared.difficulty maddons.temp matches 0 run return run tellraw @s ["",{"translate":"arguments.magical_addons.summon.invalid","color":"red"}]

## Summon
summon cave_spider ~ ~ ~ {Silent:1,CustomName:{"translate":"entity.magical_addons.sculk_spider"},DeathLootTable:"magical_addons:entities/sculk_spider",Health:64.0,attributes:[{id:knockback_resistance,base:1.0d},{id:jump_strength,base:0.5d},{id:movement_speed,base:0.35d},{id:fall_damage_multiplier,base:0.0},{id:max_health,base:64.0},{id:scale,base:1.6d},{id:burning_time,base:0.0},{id:attack_damage,base:0.0}],active_effects:[{id:"invisibility",amplifier:-1,duration:-1,show_particles:0b},{id:"fire_resistance",amplifier:-1,duration:-1,show_particles:0b}],Tags:["maddons.sculk_spider","maddons.entity","maddons.custom_step_sound","maddons.vehicle","maddons.egg_sack"],data:{magical_addons:{sound:"playsound entity.spider.step hostile @a ~ ~ ~ 0.25",sound_time:3}},                                                                                                                         Passengers:[{id:"item_display",Tags:[maddons.root,maddons.entity,maddons.sculk_spider],                                                                                                                        Passengers:[{id:"item_display",data:{magical_addons:{brain_cmd:"function magical_addons:entity/sculk_spider/brain",tick_cmd:"execute if score @s maddons.move matches 1 run function magical_addons:entity/sculk_spider/animations/walk/tick with storage magical_addons:tick data.entity.sculk_spider.animations.walk"}},item_display:"head",teleport_duration:3,shadow_strength:1.5,shadow_radius:0.75,item:{id:"potion",components:{item_model:"magical_addons:entity/sculk_spider/entity",custom_model_data:{flags:[0b]}}},view_range:300f,Tags:["maddons.entity.tickable","maddons.entity.brain","maddons.entity.ai","maddons.entity","maddons.sculk_spider","maddons.bone.body","maddons.bone"]},                                                                                                                         {id:"item_display",item_display:"head",item:{id:"potion",components:{item_model:"magical_addons:entity/sculk_spider/head",custom_model_data:{flags:[0b]}}},view_range:300f,teleport_duration:3,Tags:["maddons.sculk_spider","maddons.entity","maddons.bone.head","maddons.bone"]},                                                                                                                         {id:"item_display",item_display:"head",item:{id:"potion",components:{item_model:"magical_addons:entity/sculk_spider/abdomen",custom_model_data:{flags:[0b]}}},view_range:300f,teleport_duration:3,Tags:["maddons.sculk_spider","maddons.entity","maddons.bone.abdomen","maddons.bone"]},                                                                                                                                          {id:"item_display",item_display:"head",item:{id:"potion",components:{item_model:"magical_addons:entity/sculk_spider/left_front_leg",custom_model_data:{flags:[0b]}}},view_range:300f,teleport_duration:3,Tags:["maddons.sculk_spider","maddons.entity","maddons.bone.left_front_leg","maddons.bone","maddons.animation.walk"]},                                                                                                                         {id:"item_display",item_display:"head",item:{id:"potion",components:{item_model:"magical_addons:entity/sculk_spider/left_front_middle_leg",custom_model_data:{flags:[0b]}}},view_range:300f,teleport_duration:3,Tags:["maddons.sculk_spider","maddons.entity","maddons.bone.left_front_middle_leg","maddons.bone","maddons.animation.walk"]},                                                                                                                         {id:"item_display",item_display:"head",item:{id:"potion",components:{item_model:"magical_addons:entity/sculk_spider/left_hind_middle_leg",custom_model_data:{flags:[0b]}}},view_range:300f,teleport_duration:3,Tags:["maddons.sculk_spider","maddons.entity","maddons.bone.left_hind_middle_leg","maddons.bone","maddons.animation.walk"]},                                                                                                                         {id:"item_display",item_display:"head",item:{id:"potion",components:{item_model:"magical_addons:entity/sculk_spider/left_hind_leg",custom_model_data:{flags:[0b]}}},view_range:300f,teleport_duration:3,Tags:["maddons.sculk_spider","maddons.entity","maddons.bone.left_hind_leg","maddons.bone","maddons.animation.walk"]},                                                                                                                         {id:"item_display",item_display:"head",item:{id:"potion",components:{item_model:"magical_addons:entity/sculk_spider/right_front_leg",custom_model_data:{flags:[0b]}}},view_range:300f,teleport_duration:3,Tags:["maddons.sculk_spider","maddons.entity","maddons.bone.right_front_leg","maddons.bone","maddons.animation.walk"]},                                                                                                                         {id:"item_display",item_display:"head",item:{id:"potion",components:{item_model:"magical_addons:entity/sculk_spider/right_front_middle_leg",custom_model_data:{flags:[0b]}}},view_range:300f,teleport_duration:3,Tags:["maddons.sculk_spider","maddons.entity","maddons.bone.right_front_middle_leg","maddons.bone","maddons.animation.walk"]},                                                                                                                         {id:"item_display",item_display:"head",item:{id:"potion",components:{item_model:"magical_addons:entity/sculk_spider/right_hind_middle_leg",custom_model_data:{flags:[0b]}}},view_range:300f,teleport_duration:3,Tags:["maddons.sculk_spider","maddons.entity","maddons.bone.right_hind_middle_leg","maddons.bone","maddons.animation.walk"]},                                                                                                                         {id:"item_display",item_display:"head",item:{id:"potion",components:{item_model:"magical_addons:entity/sculk_spider/right_hind_leg",custom_model_data:{flags:[0b]}}},view_range:300f,teleport_duration:3,Tags:["maddons.sculk_spider","maddons.entity","maddons.bone.right_hind_leg","maddons.bone","maddons.animation.walk"]}]}]}

## NBT
$execute as @n[type=cave_spider,tag=maddons.vehicle,tag=maddons.sculk_spider,tag=!maddons.summoned] at @s run function magical_addons:entity/sculk_spider/set_nbt {nbt:$(nbt)}